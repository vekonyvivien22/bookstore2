"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[890],{2890:(w,d,n)=>{n.r(d),n.d(d,{AuthModule:()=>A});var h=n(6895),m=n(1390),t=n(4006);const v=o=>{if(!o.parent||!o)return null;const s=o.parent.get("password"),r=o.parent.get("passwordConfirmation");return s&&r&&""!==r.value&&s.value!==r.value?{passwordsNotMaching:!0}:null};var e=n(4650),g=n(7009),p=n(2320),f=n(4859),u=n(9549),c=n(4144),Z=n(4850);const U=[{path:"register",component:(()=>{class o{constructor(r,a,i){this.snackBar=r,this.authService=a,this.router=i,this.registerForm=new t.cw({username:new t.NI("",{validators:[t.kI.required,t.kI.minLength(5)]}),email:new t.NI("",{validators:[t.kI.required,t.kI.email]}),firstName:new t.NI("",{validators:[t.kI.required]}),lastName:new t.NI("",{validators:[t.kI.required]}),address:new t.NI("",{validators:[t.kI.required]}),password:new t.NI("",{validators:[t.kI.required]}),passwordConfirmation:new t.NI("",{validators:[t.kI.required,v]})})}register(){const r=this.registerForm.value;r.username&&r.email&&r.password&&r.address&&r.firstName&&r.lastName&&r.passwordConfirmation&&this.authService.register(r).subscribe({next:a=>{200==a.status&&a.body.successfull?(this.snackBar.open(a.body.msg,"Cancel"),this.router.navigateByUrl("/auth/login")):this.snackBar.open(a.body.error,"Cancel")},error:a=>{console.log(a),this.snackBar.open(a.error.error,"Cancel")}})}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(g.ux),e.Y36(p.e),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-register"]],decls:59,vars:2,consts:[[1,"margin-auto","login-form"],[3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","username"],["type","email","matInput","","formControlName","email"],["type","text","matInput","","formControlName","firstName"],["type","text","matInput","","formControlName","lastName"],["type","text","matInput","","ormControlName","address"],["type","password","matInput","","formControlName","password"],["type","password","matInput","","formControlName","passwordConfirmation"],["type","submit","mat-raised-button","","color","primary",1,"w-100","pt-15",3,"disabled"],[1,"align-center"],["routerLink","/auth/login"]],template:function(r,a){1&r&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.register()}),e.TgZ(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Username"),e.qZA(),e._UZ(5,"input",2),e.TgZ(6,"mat-hint"),e._uU(7,"Please enter your username."),e.qZA(),e.TgZ(8,"mat-error"),e._uU(9,"Invalid or missing username."),e.qZA()(),e.TgZ(10,"mat-form-field")(11,"mat-label"),e._uU(12,"Your email"),e.qZA(),e._UZ(13,"input",3),e.TgZ(14,"mat-hint"),e._uU(15,"Please enter your email."),e.qZA(),e.TgZ(16,"mat-error"),e._uU(17,"Invalid or missing email."),e.qZA()(),e.TgZ(18,"mat-form-field")(19,"mat-label"),e._uU(20,"Firstname"),e.qZA(),e._UZ(21,"input",4),e.TgZ(22,"mat-error"),e._uU(23,"This field is required."),e.qZA()(),e.TgZ(24,"mat-form-field")(25,"mat-label"),e._uU(26,"Lastname"),e.qZA(),e._UZ(27,"input",5),e.TgZ(28,"mat-error"),e._uU(29,"This field is required."),e.qZA()(),e.TgZ(30,"mat-form-field")(31,"mat-label"),e._uU(32,"Address"),e.qZA(),e._UZ(33,"input",6),e.TgZ(34,"mat-error"),e._uU(35,"This field is required."),e.qZA()(),e.TgZ(36,"mat-form-field")(37,"mat-label"),e._uU(38,"Password"),e.qZA(),e._UZ(39,"input",7),e.TgZ(40,"mat-hint"),e._uU(41,"Please enter your password."),e.qZA(),e.TgZ(42,"mat-error"),e._uU(43,"Missing Password."),e.qZA()(),e.TgZ(44,"mat-form-field")(45,"mat-label"),e._uU(46,"Password again"),e.qZA(),e._UZ(47,"input",8),e.TgZ(48,"mat-error"),e._uU(49,"The two passwords are not the same."),e.qZA()(),e.TgZ(50,"button",9),e._uU(51," Register "),e.qZA(),e._UZ(52,"mat-divider"),e.TgZ(53,"div",10)(54,"small"),e._uU(55," If you have an account yet, login "),e.TgZ(56,"a",11),e._uU(57,"HERE"),e.qZA(),e._uU(58,"! "),e.qZA()()()()),2&r&&(e.xp6(1),e.Q6J("formGroup",a.registerForm),e.xp6(49),e.Q6J("disabled",a.registerForm.invalid))},dependencies:[m.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,f.lW,u.KE,u.hX,u.bx,u.TO,c.Nt,Z.d]}),o})()},{path:"login",component:(()=>{class o{constructor(r,a,i){this.authService=r,this.snackBar=a,this.router=i,this.loginForm=new t.cw({username:new t.NI("",{validators:[t.kI.required]}),password:new t.NI("",{validators:[t.kI.required]})})}login(){const{username:r,password:a}=this.loginForm.value;r&&a&&(this.subscription=this.authService.login(r,a).subscribe({next:i=>{if(200==i.status&&i.body.successfull){const l=i.body.user;localStorage.setItem("user",JSON.stringify({id:l._id,email:l.email,username:l.username})),this.authService.user=l,this.snackBar.open(i.body.msg,"Cancel",{duration:3e3}),this.router.navigateByUrl("/")}},error:i=>{this.snackBar.open(i.error.error,"Cancel",{duration:3e3})}}))}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}}return o.\u0275fac=function(r){return new(r||o)(e.Y36(p.e),e.Y36(g.ux),e.Y36(m.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-login"]],decls:27,vars:2,consts:[[1,"margin-auto","login-form"],[3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","username"],["type","password","matInput","","formControlName","password"],["type","submit","mat-raised-button","","color","primary",1,"w-100","pt-15",3,"disabled"],[1,"align-center"],["routerLink","/auth/register"]],template:function(r,a){1&r&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.login()}),e.TgZ(2,"mat-form-field")(3,"mat-label"),e._uU(4,"Username"),e.qZA(),e._UZ(5,"input",2),e.TgZ(6,"mat-hint"),e._uU(7,"Please enter your username."),e.qZA(),e.TgZ(8,"mat-error"),e._uU(9,"Invalid or missing username."),e.qZA()(),e.TgZ(10,"mat-form-field")(11,"mat-label"),e._uU(12,"Password"),e.qZA(),e._UZ(13,"input",3),e.TgZ(14,"mat-hint"),e._uU(15,"Please enter your password."),e.qZA(),e.TgZ(16,"mat-error"),e._uU(17,"Missing Password."),e.qZA()(),e.TgZ(18,"button",4),e._uU(19," Login "),e.qZA(),e._UZ(20,"mat-divider"),e.TgZ(21,"div",5)(22,"small"),e._uU(23," If you don't have an account yet, register "),e.TgZ(24,"a",6),e._uU(25,"HERE"),e.qZA(),e._uU(26,"! "),e.qZA()()()()),2&r&&(e.xp6(1),e.Q6J("formGroup",a.loginForm),e.xp6(17),e.Q6J("disabled",a.loginForm.invalid))},dependencies:[m.rH,t._Y,t.Fj,t.JJ,t.JL,t.sg,t.u,f.lW,u.KE,u.hX,u.bx,u.TO,c.Nt,Z.d]}),o})()},{path:"",redirectTo:"/auth/login",pathMatch:"full"}];let T=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(U),m.Bz]}),o})();var y=n(9344);let A=(()=>{class o{}return o.\u0275fac=function(r){return new(r||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.ez,T,t.UX,y.q]}),o})()}}]);